# 圆形屏幕 UI 设计规范

**文档版本**: v1.0
**创建日期**: 2026-02-16
**适用范围**: ESP32-S3 智能桌面助手所有功能页面

---

## 📐 硬件规格

### 屏幕参数
- **尺寸**: 1.8 寸
- **分辨率**: 360×360 像素
- **形状**: 圆形
- **触控**: 电容式触控

### 显示区域
- **总像素**: 360×360
- **圆形直径**: 360 像素
- **中心点**: (180, 180)

---

## 🎨 设计原则

### 1. 圆形安全区域

**关键原则**: 所有重要内容必须在圆形安全区域内

#### 安全区域定义
```
圆心: (180, 180)
外圆半径: 180px (屏幕边缘)
安全圆半径: 160px (推荐内容区域)
核心圆半径: 120px (最重要内容)
```

#### 区域划分
- **核心区域** (半径 0-120px): 最重要的信息
  - 主要数据显示
  - 核心交互元素
  - 始终可见

- **安全区域** (半径 120-160px): 次要信息
  - 辅助信息
  - 状态显示
  - 小型按钮

- **边缘区域** (半径 160-180px): 避免放置重要内容
  - 仅用于装饰
  - 背景效果
  - 不要放置文字或按钮

### 2. 布局策略

#### ✅ 推荐布局

**A. 中心放射布局**
```
        [顶部信息]
            ↓
    [主要内容区域]
    (圆形进度/数据)
            ↓
      [底部信息]
```

**B. 环形布局**
```
     [信息1]
  [信息4] 🎯 [信息2]
     [信息3]
```

**C. 分层布局**
```
背景层: 渐变/颜色
内容层: 主要信息（中心）
交互层: 触控区域（整个圆形）
```

#### ❌ 避免的布局

- ❌ 方形网格布局（四角会被裁剪）
- ❌ 底部固定按钮栏（会被裁剪）
- ❌ 边缘文字（难以阅读）
- ❌ 小按钮靠近边缘（难以点击）

### 3. 交互设计

#### 触控区域
- **最小触控区域**: 60×60 像素
- **推荐触控区域**: 80×80 像素
- **大型触控区域**: 120×120 像素（用于主要操作）

#### 手势操作
- **点击**: 主要操作
- **长按**: 返回/特殊功能
- **滑动**: 切换页面/调节数值
- **双击**: 快捷操作（可选）

#### 按钮设计原则
1. **使用大型触控区域**: 整个圆形或大型扇形区域
2. **避免小按钮**: 特别是在边缘
3. **使用手势**: 代替多个小按钮
4. **分层交互**: 点击不同区域触发不同功能

### 4. 视觉设计

#### 字体大小
- **主要数据**: 48-64px（超大）
- **次要数据**: 24-32px（大）
- **辅助信息**: 16-20px（中）
- **提示文字**: 12-14px（小）

#### 颜色使用
- **背景**: 深色或渐变
- **主要内容**: 高对比度（白色/亮色）
- **次要内容**: 中等对比度（半透明白色）
- **装饰元素**: 低对比度

#### 圆形元素
- **优先使用圆形**: 进度环、按钮、图标
- **避免尖角**: 所有元素圆角化
- **同心圆设计**: 多层信息使用同心圆

---

## 📱 功能页面设计规范

### 通用页面结构

```
┌─────────────────────┐
│    [返回手势区域]    │  ← 顶部 1/4 区域，长按返回
│                     │
│   [状态/标题]       │  ← 半径 140-160px
│                     │
│   ╭─────────╮       │
│   │         │       │
│   │  主要   │       │  ← 半径 0-120px
│   │  内容   │       │     核心显示区域
│   │         │       │
│   ╰─────────╯       │
│                     │
│  [辅助信息/提示]    │  ← 半径 120-140px
│                     │
│  [交互区域/手势]    │  ← 底部 1/4 区域
└─────────────────────┘
```

### 各功能页面设计要点

#### 1. 番茄钟页面

**布局方案 A: 全屏交互**
```
- 整个圆形作为一个大按钮
- 点击任意位置: 开始/暂停
- 向上滑动: 跳过
- 向下滑动: 重置
- 长按中心: 返回
```

**布局方案 B: 分区交互**
```
- 顶部 1/3: 显示模式和统计
- 中心: 倒计时和进度环
- 底部 1/3: 分成 3 个扇形区域
  - 左扇形: 重置
  - 中扇形: 开始/暂停
  - 右扇形: 跳过
```

**推荐方案**: 方案 A（全屏交互）
- 更简单直观
- 触控区域大
- 符合圆形特性

#### 2. 系统监控页面

**布局**:
```
- 顶部: 页面标题
- 中心: 两个同心圆进度环
  - 外环: CPU 使用率
  - 内环: 内存使用率
- 底部: 网络速度文字
- 整体: 点击任意位置返回
```

#### 3. 时钟页面

**布局**:
```
- 中心: 大字体时间
- 上方: 日期
- 下方: 星期
- 背景: 模拟表盘刻度（可选）
```

#### 4. 天气页面

**布局**:
```
- 顶部: 城市名称
- 中心: 温度（超大字体）
- 中心下方: 天气图标
- 底部: 体感温度、湿度等
- 背景: 天气动画效果
```

#### 5. 电子相框页面

**布局**:
```
- 全屏: 照片（圆形裁剪）
- 点击: 暂停/继续轮播
- 左滑: 上一张
- 右滑: 下一张
- 长按: 返回
```

#### 6. 导航盘

**布局**:
```
- 中心圆: 时间和日期
- 外环: 8 个功能图标
  - 均匀分布在圆周上
  - 图标大小: 40×40px
  - 点击区域: 60×60px
```

---

## 🎯 设计检查清单

### 每个页面必须满足

- [ ] 所有文字在安全区域内（半径 < 160px）
- [ ] 所有按钮在安全区域内（半径 < 160px）
- [ ] 最小触控区域 60×60px
- [ ] 主要内容在核心区域（半径 < 120px）
- [ ] 有明确的返回方式（按钮或手势）
- [ ] 在 360×360 圆形屏幕上测试过
- [ ] 边缘 20px 不放置重要内容

### 交互检查

- [ ] 所有按钮都能轻松点击
- [ ] 触控反馈明显
- [ ] 手势操作直观
- [ ] 误触概率低

### 视觉检查

- [ ] 文字清晰可读
- [ ] 对比度足够
- [ ] 布局平衡美观
- [ ] 符合圆形美学

---

## 🛠️ 开发工具

### CSS 圆形裁剪

```css
.circular-screen {
  width: 360px;
  height: 360px;
  border-radius: 50%;
  overflow: hidden;
  /* 或使用 */
  clip-path: circle(50%);
}
```

### 安全区域辅助线（开发时使用）

```css
/* 外圆 - 屏幕边缘 */
.debug-outer {
  width: 360px;
  height: 360px;
  border: 2px solid red;
  border-radius: 50%;
}

/* 安全圆 */
.debug-safe {
  width: 320px;
  height: 320px;
  border: 2px solid yellow;
  border-radius: 50%;
}

/* 核心圆 */
.debug-core {
  width: 240px;
  height: 240px;
  border: 2px solid green;
  border-radius: 50%;
}
```

### 计算元素是否在圆内

```javascript
// 检查点 (x, y) 是否在圆内
function isInCircle(x, y, centerX, centerY, radius) {
  const dx = x - centerX;
  const dy = y - centerY;
  return Math.sqrt(dx * dx + dy * dy) <= radius;
}

// 检查元素是否完全在安全区域内
function isElementSafe(element) {
  const rect = element.getBoundingClientRect();
  const centerX = 180;
  const centerY = 180;
  const safeRadius = 160;

  // 检查四个角
  const corners = [
    [rect.left, rect.top],
    [rect.right, rect.top],
    [rect.left, rect.bottom],
    [rect.right, rect.bottom],
  ];

  return corners.every(([x, y]) =>
    isInCircle(x, y, centerX, centerY, safeRadius)
  );
}
```

---

## 📚 参考案例

### 优秀的圆形屏幕设计

1. **Apple Watch 表盘**
   - 中心显示主要信息
   - 边缘显示辅助信息
   - 使用圆形进度环

2. **智能手表番茄钟应用**
   - 全屏交互
   - 大型触控区域
   - 简洁的信息层次

3. **圆形仪表盘**
   - 同心圆设计
   - 清晰的数据层次
   - 优雅的动画效果

---

## 🔄 设计迭代流程

1. **草图设计**: 在纸上画圆形布局
2. **原型制作**: 在 Web 模拟器中实现
3. **安全区域检查**: 使用辅助线验证
4. **交互测试**: 测试所有触控操作
5. **视觉优化**: 调整字体、颜色、间距
6. **真机测试**: 在实际硬件上验证（如有）

---

## ⚠️ 常见错误

### 错误 1: 底部按钮栏
```
❌ 错误做法:
┌─────────┐
│  内容   │
│         │
│ [按钮栏] │ ← 会被裁剪
└─────────┘

✅ 正确做法:
┌─────────┐
│  内容   │
│ [大按钮]│ ← 在圆内
│         │
└─────────┘
```

### 错误 2: 小按钮靠近边缘
```
❌ 错误: 40×40px 按钮在半径 150px 处
✅ 正确: 80×80px 按钮在半径 100px 处
```

### 错误 3: 方形思维
```
❌ 错误: 使用方形网格布局
✅ 正确: 使用圆形/放射状布局
```

---

## 📝 更新日志

- **v1.0** (2026-02-16): 初始版本，定义圆形屏幕设计规范

---

**重要提示**: 所有后续开发的功能页面都必须遵循此设计规范！
